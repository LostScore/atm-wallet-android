(window.webpackJsonp=window.webpackJsonp||[]).push([[48,59,60],{317:function(e,r,t){"use strict";t.r(r),t.d(r,"proxyTo",function(){return d});t(18);var n=t(165),a=t.n(n),s=t(4),u=t.n(s),i=(t(11),t(0)),c=t.n(i),o=t(1),p=t(12),l=t(25),h=t(35),f=t(10),m={computed:{slug:function(){return this.service.slug},type:function(){var e=this.params;return"function"==typeof this.service.typeFor?this.service.typeFor(e):""},subtitle:function(){var e,r=this.params;return"function"==typeof this.service.subtitleFor&&(e=this.service.subtitleFor(r)),e||this.type},title:function(){var e=this.params;return"function"==typeof this.service.titleFor?this.service.titleFor(e):this.$t("exchange.title.".concat(this.service.type))},limits:function(){var e=this.params;return"function"==typeof this.service.limitsStringFor?this.service.limitsStringFor(e):""}}};function d(e){return function(){var r=c()(regeneratorRuntime.mark(function r(t){var n,a,s,i,c,o,p,l,h,m,d,b=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(c in n=b.length>1&&void 0!==b[1]?b[1]:{},a={},s=e,i=!1,t)o=s.indexOf(":"+c),p=t[c],~o?s=s.substring(0,o)+p+s.substring(o+c.length+1):(a[c]=p,i=!0);return l={},r.next=8,Object(f.a)({method:i?"POST":"GET",url:"/_api".concat(s),body:i?a:void 0,headers:u()({},this.headers,l,n.headers)});case 8:if(h=r.sent,m=h.result,!(d=h.error)){r.next=15;break}throw new Error(d);case 15:if(!m){r.next=17;break}return r.abrupt("return",m);case 17:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()}r.default={created:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._ready=!1,this._latch=new o.a,"function"!=typeof this.initialize){e.next=5;break}return e.next=5,this.initialize();case 5:"undefined"!=typeof window&&(window.services=window.services||{},window.services[this.slug]=this),this._ready=!0,this._latch.resolve(!0),this._latch={promise:function(){return Promise.resolve(!0)}};case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{ready:function(){return this._latch.promise()},enabled:function(){return!0},baseAmount:function(e,r){var t={};return t=Object(o.b)(e.currency,r)?e:p.a.convert(e,r),t.currency=r&&r.toUpperCase(),t},paymentMethodFor:function(){var e=c()(regeneratorRuntime.mark(function e(r){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.abrupt("return",new Vue({store:this.$store,i18n:this.$i18n,mixins:[m],data:function(){return{params:u()({},r),service:t}}}));case 2:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),action:function(){var e=c()(regeneratorRuntime.mark(function e(r){var t,n,s,u,i,c,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r,u=null;case 2:if(!t){e.next=27;break}if(n=t,t=null,"rpc"!=n.type){e.next=22;break}if(i=n.method,!n.schema){e.next=13;break}return e.next=10,this.prepareExecutionHash(n.params,n.schema,u);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=n.params;case 14:return c=e.t0,u=null,e.next=18,l.a.rpc(i,c);case 18:if(!(o=e.sent).error){e.next=21;break}return e.abrupt("return",n.fallback||{error:o.error});case 21:o.result&&(s=o.result,n.params.then&&(t=n.params.then),o.result.execute&&(t=o.result.execute),o.result.action&&(t=o.result.action),o.result.transaction&&o.result.transaction.id&&this.$store.dispatch("exchange/updateMeta",a()({},"services.".concat(this.slug,".lastTxId"),s.transaction.id)));case 22:if("screen"!=n.type){e.next=24;break}return e.abrupt("return",{result:n});case 24:"exit"==n.type&&Object(h.b)(),e.next=2;break;case 27:return e.abrupt("return",{result:s});case 28:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),quote:function(){var e=c()(regeneratorRuntime.mark(function e(r){var t,n,a,s,u,i,c,o,f,m,d,b,x,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",{});case 2:return t=r.amount,n=r.to,a=r.from,this.to=n&&n.toUpperCase(),s={mode:r.mode,amount:this.baseAmount(t,a),to:this.to,from:a&&a.toUpperCase(),serviceToken:this.token},e.next=7,Object(h.d)("eth");case 7:if((u=e.sent)&&!u.error&&(s.ethereumAddress=u),"buy"==r.mode){e.next=14;break}return e.next=12,Object(h.d)(a);case 12:(i=e.sent).error||(s.refundAddress=i);case 14:if("sell"==r.mode){e.next=19;break}return e.next=17,Object(h.d)(n);case 17:(c=e.sent).error||(s.address=c);case 19:return o=this.slug,f=this.$store.state.exchange.trade.pairMeta,"trade"==r.mode&&f&&f[0]&&f[0].maximum&&f[1]&&f[1].maximum&&(m=1===p.a.currencyCompare(f[0].maximum,f[1].maximum)?0:1,"changelly"!==o&&p.a.currencyCompare(s.amount,f[m].maximum)>0&&(o="changelly")),d=o?"".concat(o,"/quote"):"quote",e.next=25,l.a.rpc(d,s);case 25:if(b=e.sent,x=b.result,!(g=b.error)){e.next=30;break}return e.abrupt("return",{error:g});case 30:return e.abrupt("return",{result:x});case 31:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),execute:function(){var e=c()(regeneratorRuntime.mark(function e(r){var t,n,s,u,i,c,o,f,m,d,b,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=r.execute,n=t,i=null;case 3:if(!n){e.next=55;break}if(s=n,n=null,"rpc"!=s.type){e.next=20;break}return c=s.method,e.next=10,this.prepareExecutionHash(s.params,s.schema,i);case 10:return o=e.sent,i=null,e.next=14,l.a.rpc(c,o);case 14:if(!(f=e.sent).error){e.next=17;break}return e.abrupt("return",s.fallback||{error:f.error});case 17:f.result&&(u=f.result,f.result.execute&&(n=f.result.execute),f.result.action&&(n=f.result.action),f.result.transaction.id&&this.$store.dispatch("exchange/updateMeta",a()({},"services.".concat(this.slug,".lastTxId"),u.transaction.id))),e.next=53;break;case 20:if("blockchain-tx"!=s.type){e.next=45;break}return e.next=23,Object(h.g)({currency:s.currency.toLowerCase(),toAddress:s.address,toDescription:s.memo||"",amount:p.a.stringToCurrency(s.amount,s.currency),transmit:!0});case 23:if(m=e.sent,d=m.result,b=m.error,n=s.then,!b){e.next=37;break}if(x=b.response&&b.response.status,i=403==x?{status:"cancelled"}:{status:"error",error:b},n){e.next=34;break}return e.abrupt("return",this.transactionErrorScreen(b));case 34:n.fallback=this.transactionErrorScreen(b);case 35:e.next=43;break;case 37:if(i={status:"success",transactionHash:d.hash},n){e.next=42;break}return e.abrupt("return",this.genericSuccessScreen(d));case 42:n.fallback=this.genericSuccessScreen(d);case 43:e.next=53;break;case 45:if("browser-url"!=s.type){e.next=51;break}return e.next=48,Object(h.a)(s);case 48:n=s.then,e.next=53;break;case 51:if(!s.meta||!s.meta.screen){e.next=53;break}return e.abrupt("return",{result:s});case 53:e.next=3;break;case 55:return e.abrupt("return",{result:u});case 56:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}(),transactionErrorScreen:function(e){var r=e.response,t=r&&403==r.status?"cancelled":"error",n=e.message||e;return r&&401==r.status&&(n=this.$t("exchange.transaction.error.auth-error")),{result:{meta:{screen:{screenType:"error",title:this.$t("exchange.trade.".concat(t,".title")),message:this.$t("exchange.transaction.error.".concat(n)),userActions:[{type:"quote",params:null,title:this.$t("general.button.ok")}]}}}}},genericSuccessScreen:function(){return{result:{meta:{screen:{screenType:"complete",title:this.$t("exchange.general.completed.title"),message:this.$t("exchange.trade.completed.message"),userActions:[{type:"close",title:this.$t("general.button.ok")}]}}}}},prepareExecutionHash:function(){var e=c()(regeneratorRuntime.mark(function e(r,t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=c()(regeneratorRuntime.mark(function e(r,t,s){var i,c,o,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=t.type){e.next=17;break}if(!t.blockchainRef){e.next=8;break}return console.log("Blockchain ref for ",s),e.next=5,Object(h.d)(t.blockchainRef);case 5:return e.abrupt("return",e.sent);case 8:if(!t.srn){e.next=12;break}return e.abrupt("return",t.srn);case 12:if(!t.substitute){e.next=16;break}return e.abrupt("return",n[t.substitute]);case 16:return e.abrupt("return",r);case 17:i=u()({},r),e.t0=regeneratorRuntime.keys(t.properties);case 19:if((e.t1=e.t0()).done){e.next=36;break}if(c=e.t1.value,o=t.properties[c],p=r[c],t){e.next=27;break}i[c]=p,e.next=34;break;case 27:if(!o){e.next=33;break}return e.next=30,a(p,o,c);case 30:i[c]=e.sent,e.next=34;break;case 33:i[c]=p;case 34:e.next=19;break;case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}},e,this)}));return function(r,t,n){return e.apply(this,arguments)}}(),e.next=3,a(r,t,null);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(r,t,n){return e.apply(this,arguments)}}()}}},318:function(e,r,t){"use strict";t.r(r),t.d(r,"invertExchange",function(){return c}),t.d(r,"biggify",function(){return o}),t.d(r,"exchange",function(){return p}),t.d(r,"getRate",function(){return l}),t.d(r,"sumSameCurrencies",function(){return h}),t.d(r,"additiveInverse",function(){return f}),t.d(r,"subtractSameCurrencies",function(){return m});var n=t(7),a=t.n(n),s=t(4),u=t.n(s),i=t(369);function c(e,r){var t=new i.BigNumber(e.numerator).dividedBy(e.denominator).exponentiatedBy(-1).multipliedBy(r.denominator).toFixed(0);return u()({},r,{numerator:t})}function o(e){return null==e?new i.BigNumber(0):"object"==a()(e)?new i.BigNumber(e.numerator).dividedBy(e.denominator):new i.BigNumber(e)}function p(e,r){if(r.currency==e.currency)return e;var t=o(r),n=o(e).multipliedBy(t).multipliedBy(r.denominator).toFixed(0);r.denominator;return u()({},r,{numerator:n})}function l(e,r){var t=o(e),n=o(r),a=t.dividedBy(n).multipliedBy(e.denominator);return u()({},e,{numerator:a.toFixed(0)})}function h(e,r){if(e.currency.toLowerCase()!=r.currency.toLowerCase())throw new Error("Can't sum two amounts with different currencies (".concat(e.currency," and ").concat(r.currency,")"));var t=o(e),n=o(r),a=t.plus(n),s=e.denominator.length>r.denominator.length?e.denominator:r.denominator;return{numerator:a.multipliedBy(s).toFixed(0),denominator:s,currency:e.currency}}function f(e){return u()({},e,{numerator:new i.BigNumber(e.numerator).multipliedBy(-1).toFixed(0)})}function m(e,r){return h(e,f(r))}},326:function(e,r,t){"use strict";t.r(r);t(11);var n=t(0),a=t.n(n),s=t(317),u=(t(12),t(25)),i=t(1),c=(t(318),t(45),t(335));r.default={mixins:[s.default],data:function(){return{estimatedDelivery:"1-6 hours"}},computed:{slug:function(){var e="changelly",r=Object(i.g)(this.$store,"state.experiments.all.".concat(c.c));return r&&!0===r.active&&(e="",Object(i.g)(r,"meta.coinswitchOnly")&&(e="coinswitch")),this.$store.state.config.tradeService||e}},methods:{history:Object(s.proxyTo)("/exchange/services/changelly/account/history"),getPairMeta:function(){var e=a()(regeneratorRuntime.mark(function e(r){var t,n,a,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.to,n=r.from,e.next=3,u.a.rpc(this.slug?"".concat(this.slug,"/pairMeta"):"pairMeta",{from:n,to:t});case 3:if(a=e.sent,s=a.result,!(i=a.error)){e.next=8;break}return e.abrupt("return",{error:i});case 8:return e.abrupt("return",{result:s});case 9:case"end":return e.stop()}},e,this)}));return function(r){return e.apply(this,arguments)}}()}}},335:function(e,r,t){"use strict";t.d(r,"a",function(){return n}),t.d(r,"c",function(){return a}),t.d(r,"b",function(){return s});var n="map",a="trade-load-balance",s="simplex-connector"}}]);
//# sourceMappingURL=69abd49363a9dadc1c6b.js.map